<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Birthday Surprise - Page 2 (Grand)</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      margin: 0;
      padding: 0;
      font-family: Arial, sans-serif;
      text-align: center;
      color: white;
      overflow: hidden;
      position: relative;
      background: black;
    }

    /* Video Container - Muted for background effect */
    .video-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      z-index: 1; 
    }

    #background-video {
      min-width: 100%;
      min-height: 100%;
      width: auto;
      height: auto;
      position: absolute;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      object-fit: cover;
      filter: brightness(70%); /* Slightly dim the video */
    }

    .content {
      position: absolute;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: space-between; 
      align-items: center;
      z-index: 5; /* Ensure content is above animations */
      background: rgba(0, 0, 0, 0.2); /* Very light overlay */
      padding-bottom: 30px;
    }

    h1 {
      margin-top: 20px;
      font-size: 3.5em;
      color: #ffcc00;
      text-shadow: 0 0 15px hotpink, 0 0 5px black;
      z-index: 6;
      font-weight: bold;
    }
    
    /* --- Next Button Area --- */
    .next-area {
      position: relative;
      z-index: 6;
      /* Hide initially */
      opacity: 0; 
      transition: opacity 1s;
    }

    .next-area.show {
        opacity: 1;
    }

    #next-button {
      padding: 18px 45px;
      font-size: 2em;
      font-weight: bold;
      background: #8a2be2; /* BlueViolet */
      color: white;
      border: 4px solid #ffcc00;
      border-radius: 15px;
      cursor: pointer;
      box-shadow: 0 0 20px #ffcc00;
    }

    /* Floating Emojis */
    .emoji {
      position: absolute;
      font-size: 3rem;
      animation: float linear infinite;
      z-index: 4;
      pointer-events: none;
    }
    @keyframes float {
      0% { transform: translateY(100vh) rotate(0deg); opacity: 1; }
      100% { transform: translateY(-10vh) rotate(360deg); opacity: 0; }
    }

    /* Canvas for Confetti/Fireworks */
    canvas {
        position: fixed;
        top: 0;
        left: 0;
        pointer-events: none;
        z-index: 3;
    }
  </style>
</head>
<body>

  <div class="video-container">
    <video autoplay muted loop playsinline id="background-video">
      <source src="Page2.mp4" type="video/mp4">
      Your browser does not support the video tag.
    </video>
  </div>
  
  <audio id="bg-audio" autoplay loop>
      <source src="Page2.mp3" type="audio/mpeg">
  </audio>

  <div class="content">
    
    <h1>Happy Birthday Pandaüêº</h1>
    
    <div class="next-area" id="next-container">
      <button id="next-button" onclick="moveNext()">
          Next Surprise! ‚ù§Ô∏è
      </button>
    </div>
  </div>

  <canvas id="animation-canvas"></canvas>

  <script>
    const video = document.getElementById('background-video');
    const audio = document.getElementById('bg-audio');
    const nextContainer = document.getElementById('next-container');
    const canvas = document.getElementById('animation-canvas');
    const ctx = canvas.getContext('2d');
    canvas.width = window.innerWidth;
    canvas.height = window.innerHeight;
    
    const delayDuration = 15000; // 15 seconds

    // --- 1. Audio Autoplay Workaround ---
    // This is the best effort to start audio immediately
    document.addEventListener('DOMContentLoaded', () => {
        let playPromise = audio.play();
        if (playPromise !== undefined) {
            playPromise.catch(() => {
                // If autoplay fails, prompt the user on their first tap (anywhere)
                const resumeAudio = () => {
                    audio.play();
                    document.removeEventListener("click", resumeAudio);
                    document.removeEventListener("touchstart", resumeAudio);
                };
                // Show a brief hint (optional, but helpful)
                document.body.insertAdjacentHTML('beforeend', '<div id="audio-hint" style="position: fixed; top: 50%; left: 50%; transform: translate(-50%, -50%); background: rgba(0,0,0,0.8); padding: 10px; border-radius: 10px; z-index: 10; color: white;">Tap screen for sound!</div>');
                
                document.addEventListener("click", resumeAudio);
                document.addEventListener("touchstart", resumeAudio);
                setTimeout(() => {
                    const hint = document.getElementById('audio-hint');
                    if(hint) hint.remove();
                }, 3000); // Remove hint after 3 seconds
            });
        }
    });

    // --- 2. 15-Second Next Button Reveal ---
    setTimeout(() => {
        nextContainer.classList.add('show');
    }, delayDuration);

    // --- 3. Floating Emojis ---
    const emojis = ["üêº","üíñ","‚ú®","ü•≥","üéÇ"];
    function createEmoji() {
      const emoji = document.createElement("div");
      emoji.innerText = emojis[Math.floor(Math.random()*emojis.length)];
      emoji.classList.add("emoji");
      emoji.style.left = Math.random() * 100 + "vw";
      emoji.style.animationDuration = (5 + Math.random() * 5) + "s";
      document.body.appendChild(emoji);
      setTimeout(() => { emoji.remove(); }, 10000);
    }
    setInterval(createEmoji, 300);

    // --- 4. Confetti/Fireworks Animation ---
    let particles = [];
    function random(min, max) { return Math.random() * (max - min) + min; }
    function Particle(x, y, color) {
        this.x = x; this.y = y;
        this.color = color;
        this.radius = random(1,3);
        this.angle = random(0, 2 * Math.PI);
        this.speed = random(1,6);
        this.friction = 0.95;
        this.gravity = 0.1;
        this.alpha = 1;
    }
    Particle.prototype.update = function() {
        this.x += Math.cos(this.angle) * this.speed;
        this.y += Math.sin(this.angle) * this.speed + this.gravity;
        this.speed *= this.friction;
        this.alpha -= 0.015;
    }
    Particle.prototype.draw = function() {
        ctx.save();
        ctx.globalAlpha = this.alpha;
        ctx.fillStyle = this.color;
        ctx.beginPath();
        ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2);
        ctx.fill();
        ctx.restore();
    }
    function createBlast(x, y) {
        const colors = ["#ff00ff", "#00ffff", "#ff0000", "#ffff00", "#ffffff"];
        for (let i = 0; i < 50; i++) {
            particles.push(new Particle(x, y, colors[Math.floor(Math.random()*colors.length)]));
        }
    }
    function animate() {
        // Clear canvas with slight trail effect
        ctx.fillStyle = "rgba(0,0,0,0.1)"; 
        ctx.fillRect(0, 0, canvas.width, canvas.height);
        
        particles.forEach((p, i) => {
            p.update();
            p.draw();
            if (p.alpha <= 0 || p.y > canvas.height) particles.splice(i, 1);
        });
        requestAnimationFrame(animate);
    }
    // Continuous blasts near the top
    setInterval(() => createBlast(random(0, canvas.width), random(0, canvas.height/4)), 1000); 
    animate();

    // --- 5. Navigation Function ---
    function moveNext() {
        // Stop all media before navigating
        video.pause();
        audio.pause();
        window.location.href = "page3.html"; 
    }
  </script>

</body>
</html>
